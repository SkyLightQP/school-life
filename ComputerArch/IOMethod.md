# 입출력 방식
CPU <-> I/O 장치 데이터 전송 제어 방식

## CPU 직접 제어
CPU가 명령을 수행하고 데이터 전송, 상태 검사

### 프로그램에 의한 제어 (Programmed I/O)
- I/O 작업 중
    - 상태레지스터: busy
- I/O 쉬는 중
    - 상태레지스터: idle

- CPU가 상태레지스터 확인해서,
    - busy이면 대기
    - idle이면 데이터 송수신

- I/O 상태에 따라 CPU 대기 시간이 늘어나 비효율적

### 인터럽트 (Interrupted I/O)
- CPU 작업 중 I/O가 인터럽트 발생
- CPU가 하던 작업 멈추고 I/O와 통신
- 이후 다시 하던 일 수행

- H/W 인터럽트
    - CPU 주변 H/W에 의해 발생
    - 마스크(거부) 가능, 마스크 불가능(예: 전력 이상 등)
- S/W 인터럽트
    - CPU 내부
        - 잘못된 명령, 잘못된 연산, 오버플로, 언더플로
    - CPU 외부
        - 자판 입력, 전원 차단
        - I/O 장치의 전송요구 종료
- 인터럽트 우선순위
    - S/W 방식: Polling
        - 미리 정해진 순서에 따라 상태 확인 후 처리
    - H/W 방식: Daisy Chain
        - CPU에서 가까운 장치를 먼저 처리

## 별도 제어기 제어

### DMA (Direct Memory Access)
- CPU는 뱔도의 DMA 제어기에 신호 전달 후 다른 작업 수행
- 이후 DMA가 I/O <-> 메모리에서 I/O 작업 진행

- DMA 제어기 구성
    - 주소레지스터
        - 메모리와 통신을 위한 주소 지정
    - 계수레지스터
        - 전송할 워드 개수
- DMA 처리 순서
    - CPU가 DMA에 정보 송신
        - 장치 주소, 읽기 / 쓰기 신호
        - 작업 시작 주소, 전송 데이터 워드 개수
    - DMA는 CPU로 Bus Request 신호 전송
    - CPU는 DMA로 Bus Grant 신호 전송
    - DMA가 작업 수행
    - 끝나면 CPU로 INTR 신호 전송

### 채널에 의한 방식 (Channel I/O)
- 채널 제어기가 CPU와 독립적으로 I/O 작업 수행
- 채널 명령 정보
    - I/O 동작 명령
    - 메모리 블록 시작 주소
    - 블록 크기

### 정리
| 제어 방식 | CPU가 직접 제어하는가? | 특징 |
|---------|----------------------|------|
| 프로그램 | O | 비효율적, CPU 부하 걸림 |
| 인터럽트 | O | CPU가 대기하지 않고 작업 |
| DMA | X | 별도 제어기가 대신 제어 |
| 채널 | X | DMA보다 많은 자료를 한꺼번에 전송 |